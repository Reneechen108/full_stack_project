{"ast":null,"code":"import _objectSpread from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ruichunchen/my-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';// import items from './data';\nimport Client from'./Contentful';// Client.getEntries({\n//     content_type: \"beachResortRoom\"\n// }).then(response => console.log(response.items));\nvar RoomContext=React.createContext();// <RoomContext.Provider value={'hello'}\nvar RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);var _super=_createSuper(RoomProvider);function RoomProvider(){var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={houses:[],sortedRooms:[],featuredHouses:[],loading:true,type:'all',capacity:1,price:0,minPrice:0,maxPrice:0,minSize:0,maxSize:0,breakfast:false,pets:false};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,houses,featuredHouses,maxPrice,maxSize;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:\"beachResortRoom\",// order: 'sys.createdAt'\norder:\"fields.price\"// -fields.price\n});case 3:response=_context.sent;houses=_this.formatData(response.items);featuredHouses=houses.filter(function(house){return house.featured===true;});maxPrice=Math.max.apply(Math,_toConsumableArray(houses.map(function(item){return item.price;})));maxSize=Math.max.apply(Math,_toConsumableArray(houses.map(function(item){return item.size;})));_this.setState({houses:houses,featuredHouses:featuredHouses,sortedRooms:houses,loading:false,price:maxPrice,maxPrice:maxPrice,maxSize:maxSize});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));_this.getHouse=function(slug){var tempHouses=_toConsumableArray(_this.state.houses);var house=tempHouses.find(function(house){return house.slug===slug;});return house;};_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=event.target.name;_this.setState(_defineProperty({},name,value),_this.filterHouses);// const type = event.target.type;\n// const name = event.target.name;\n// const value = event.target.value;\n//console.log(`this is type: ${type}, this is name: ${name}, this is value: ${value}`);\n};_this.filterHouses=function(){var _this$state=_this.state,houses=_this$state.houses,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,minSize=_this$state.minSize,maxSize=_this$state.maxSize,breakfast=_this$state.breakfast,pets=_this$state.pets;// all the houses\nvar tempHouses=_toConsumableArray(houses);// transform value\ncapacity=parseInt(capacity);price=parseInt(price);// filter by type\nif(type!=='all'){tempHouses=tempHouses.filter(function(house){return house.type===type;});}// filter by capacity\nif(capacity!==1){tempHouses=tempHouses.filter(function(house){return house.capacity>=capacity;});}// filter by price\ntempHouses=tempHouses.filter(function(house){return house.price<=price;});// filter by size\ntempHouses=tempHouses.filter(function(house){return house.size>=minSize&&house.size<=maxSize;});// filter by breakfast\nif(breakfast){tempHouses=tempHouses.filter(function(house){return house.breakfast===true;});}// filter by pets\nif(pets){tempHouses=tempHouses.filter(function(house){return house.pets===true;});}// change state\n_this.setState({sortedRooms:tempHouses});// console.log(\"hello\");\n};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();// let houses = this.formatData(items);\n// //console.log(houses);\n// let featuredHouses = houses.filter(house => house.featured === true);\n// let maxPrice = Math.max(...houses.map(item => item.price));\n// let maxSize = Math.max(...houses.map(item => item.size));\n// this.setState({\n//     houses, \n//     featuredHouses, \n//     sortedRooms: houses, \n//     loading: false,\n//     price: maxPrice,\n//     maxPrice: maxPrice,\n//     maxSize: maxSize\n// });\n}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});var house=_objectSpread(_objectSpread({},item.fields),{},{images:images,id:id});//images : images overwrite\nreturn house;});return tempItems;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(RoomContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{getHouse:this.getHouse,handleChange:this.handleChange})},this.props.children);}}]);return RoomProvider;}(Component);var RoomConsumer=RoomContext.Consumer;export function withRoomConsumer(Component){return function ConsumerWrapper(props){return/*#__PURE__*/React.createElement(RoomConsumer,null,function(value){return/*#__PURE__*/React.createElement(Component,Object.assign({},props,{context:value}));});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"sources":["/Users/ruichunchen/my-react/src/Context.js"],"names":["React","Component","Client","RoomContext","createContext","RoomProvider","state","houses","sortedRooms","featuredHouses","loading","type","capacity","price","minPrice","maxPrice","minSize","maxSize","breakfast","pets","getData","getEntries","content_type","order","response","formatData","items","filter","house","featured","Math","max","map","item","size","setState","console","log","getHouse","slug","tempHouses","find","handleChange","event","target","value","checked","name","filterHouses","parseInt","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"wxCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA;AACA;AACA;AAEA,GAAMC,CAAAA,WAAW,CAAGH,KAAK,CAACI,aAAN,EAApB,CACA;GACMC,CAAAA,Y,mVACFC,K,CAAM,CACFC,MAAM,CAAC,EADL,CAEFC,WAAW,CAAE,EAFX,CAGFC,cAAc,CAAE,EAHd,CAIFC,OAAO,CAAE,IAJP,CAKFC,IAAI,CAAE,KALJ,CAMFC,QAAQ,CAAE,CANR,CAOFC,KAAK,CAAE,CAPL,CAQFC,QAAQ,CAAE,CARR,CASFC,QAAQ,CAAE,CATR,CAUFC,OAAO,CAAE,CAVP,CAWFC,OAAO,CAAE,CAXP,CAYFC,SAAS,CAAE,KAZT,CAaFC,IAAI,CAAE,KAbJ,C,OAgBNC,O,sEAAU,6NAEmBlB,CAAAA,MAAM,CAACmB,UAAP,CAAkB,CACnCC,YAAY,CAAE,iBADqB,CAEnC;AACAC,KAAK,CAAE,cAAe;AAHa,CAAlB,CAFnB,QAEEC,QAFF,eAOEjB,MAPF,CAOW,MAAKkB,UAAL,CAAgBD,QAAQ,CAACE,KAAzB,CAPX,CAQEjB,cARF,CAQmBF,MAAM,CAACoB,MAAP,CAAc,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,QAAN,GAAmB,IAAvB,EAAnB,CARnB,CASEd,QATF,CASae,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQvB,MAAM,CAACyB,GAAP,CAAW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACpB,KAAT,EAAf,CAAR,EATjB,CAUEI,OAVF,CAUYa,IAAI,CAACC,GAAL,OAAAD,IAAI,oBAAQvB,MAAM,CAACyB,GAAP,CAAW,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAT,EAAf,CAAR,EAVhB,CAWF,MAAKC,QAAL,CAAc,CACV5B,MAAM,CAANA,MADU,CAEVE,cAAc,CAAdA,cAFU,CAGVD,WAAW,CAAED,MAHH,CAIVG,OAAO,CAAE,KAJC,CAKVG,KAAK,CAAEE,QALG,CAMVA,QAAQ,CAAEA,QANA,CAOVE,OAAO,CAAEA,OAPC,CAAd,EAXE,iFAqBFmB,OAAO,CAACC,GAAR,cArBE,qE,SAqDVC,Q,CAAW,SAACC,IAAD,CAAU,CACjB,GAAIC,CAAAA,UAAU,oBAAO,MAAKlC,KAAL,CAAWC,MAAlB,CAAd,CACA,GAAMqB,CAAAA,KAAK,CAAGY,UAAU,CAACC,IAAX,CAAgB,SAAAb,KAAK,QAAIA,CAAAA,KAAK,CAACW,IAAN,GAAeA,IAAnB,EAArB,CAAd,CACA,MAAOX,CAAAA,KAAP,CACH,C,OAEDc,Y,CAAe,SAAAC,KAAK,CAAI,CACpB,GAAMC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAArB,CACA,GAAMC,CAAAA,KAAK,CAAGD,MAAM,CAACjC,IAAP,GAAgB,UAAhB,CAA6BiC,MAAM,CAACE,OAApC,CAA8CF,MAAM,CAACC,KAAnE,CACA,GAAME,CAAAA,IAAI,CAAGJ,KAAK,CAACC,MAAN,CAAaG,IAA1B,CACA,MAAKZ,QAAL,oBACKY,IADL,CACYF,KADZ,EAEG,MAAKG,YAFR,EAGA;AACA;AACA;AACA;AACH,C,OAEDA,Y,CAAe,UAAM,iBAGb,MAAK1C,KAHQ,CAEbC,MAFa,aAEbA,MAFa,CAELI,IAFK,aAELA,IAFK,CAECC,QAFD,aAECA,QAFD,CAEWC,KAFX,aAEWA,KAFX,CAEkBG,OAFlB,aAEkBA,OAFlB,CAE2BC,OAF3B,aAE2BA,OAF3B,CAEoCC,SAFpC,aAEoCA,SAFpC,CAE+CC,IAF/C,aAE+CA,IAF/C,CAIjB;AACA,GAAIqB,CAAAA,UAAU,oBAAOjC,MAAP,CAAd,CAEA;AACAK,QAAQ,CAAGqC,QAAQ,CAACrC,QAAD,CAAnB,CACAC,KAAK,CAAGoC,QAAQ,CAACpC,KAAD,CAAhB,CAEA;AACA,GAAIF,IAAI,GAAK,KAAb,CAAoB,CAChB6B,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACjB,IAAN,GAAeA,IAAnB,EAAvB,CAAb,CACH,CAED;AACA,GAAGC,QAAQ,GAAK,CAAhB,CAAkB,CACd4B,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAAChB,QAAN,EAAkBA,QAAtB,EAAvB,CAAb,CACH,CAED;AACA4B,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACf,KAAN,EAAeA,KAAnB,EAAvB,CAAb,CACA;AACA2B,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACM,IAAN,EAAclB,OAAd,EAAyBY,KAAK,CAACM,IAAN,EAAcjB,OAA3C,EAAvB,CAAb,CACA;AACA,GAAGC,SAAH,CAAa,CACTsB,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACV,SAAN,GAAoB,IAAxB,EAAvB,CAAb,CACH,CACD;AACA,GAAGC,IAAH,CAAQ,CACJqB,UAAU,CAAGA,UAAU,CAACb,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACT,IAAN,GAAe,IAAnB,EAAvB,CAAb,CACH,CAED;AACA,MAAKgB,QAAL,CAAc,CACV3B,WAAW,CAAEgC,UADH,CAAd,EAGA;AACH,C,qGAtFkB,CACf,KAAKpB,OAAL,GACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,C,8CAEUM,K,CAAM,CACb,GAAIwB,CAAAA,SAAS,CAAGxB,KAAK,CAACM,GAAN,CAAU,SAAAC,IAAI,CAAI,CAC9B,GAAIkB,CAAAA,EAAE,CAAGlB,IAAI,CAACmB,GAAL,CAASD,EAAlB,CACA,GAAIE,CAAAA,MAAM,CAAGpB,IAAI,CAACqB,MAAL,CAAYD,MAAZ,CAAmBrB,GAAnB,CAAuB,SAAAuB,KAAK,QAAIA,CAAAA,KAAK,CAACD,MAAN,CAAaE,IAAb,CAAkBC,GAAtB,EAA5B,CAAb,CACA,GAAI7B,CAAAA,KAAK,gCAAOK,IAAI,CAACqB,MAAZ,MAAoBD,MAAM,CAANA,MAApB,CAA4BF,EAAE,CAAFA,EAA5B,EAAT,CAA0C;AAC1C,MAAOvB,CAAAA,KAAP,CACH,CALe,CAAhB,CAMA,MAAOsB,CAAAA,SAAP,CACH,C,uCA8DQ,CACL,mBACI,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,gCACpB,KAAK5C,KADe,MAEvBgC,QAAQ,CAAE,KAAKA,QAFQ,CAGvBI,YAAY,CAAE,KAAKA,YAHI,EAA3B,EAKK,KAAKgB,KAAL,CAAWC,QALhB,CADJ,CASH,C,0BA5IsB1D,S,EA+I3B,GAAM2D,CAAAA,YAAY,CAAGzD,WAAW,CAAC0D,QAAjC,CAEA,MAAO,SAASC,CAAAA,gBAAT,CAA0B7D,SAA1B,CAAoC,CACvC,MAAO,SAAS8D,CAAAA,eAAT,CAAyBL,KAAzB,CAA+B,CAClC,mBACA,oBAAC,YAAD,MACK,SAAAb,KAAK,qBAAI,oBAAC,SAAD,kBAAea,KAAf,EAAsB,OAAO,CAAEb,KAA/B,GAAJ,EADV,CADA,CAKH,CAND,CAOH,CAED,OAAOxC,YAAP,CAAqBuD,YAArB,CAAmCzD,WAAnC","sourcesContent":["import React, { Component } from 'react'\n// import items from './data';\nimport Client from './Contentful';\n\n// Client.getEntries({\n//     content_type: \"beachResortRoom\"\n// }).then(response => console.log(response.items));\n\nconst RoomContext = React.createContext();\n// <RoomContext.Provider value={'hello'}\nclass RoomProvider extends Component {\n    state={\n        houses:[],\n        sortedRooms: [],\n        featuredHouses: [],\n        loading: true,\n        type: 'all',\n        capacity: 1,\n        price: 0,\n        minPrice: 0,\n        maxPrice: 0,\n        minSize: 0,\n        maxSize: 0,\n        breakfast: false,\n        pets: false\n    };\n    // getData{}\n    getData = async() => {\n        try{\n            let response = await Client.getEntries({\n                content_type: \"beachResortRoom\",\n                // order: 'sys.createdAt'\n                order: \"fields.price\" // -fields.price\n            });\n            let houses = this.formatData(response.items);\n            let featuredHouses = houses.filter(house => house.featured === true);\n            let maxPrice = Math.max(...houses.map(item => item.price));\n            let maxSize = Math.max(...houses.map(item => item.size));\n            this.setState({\n                houses, \n                featuredHouses, \n                sortedRooms: houses, \n                loading: false,\n                price: maxPrice,\n                maxPrice: maxPrice,\n                maxSize: maxSize\n            });\n        }catch(error){\n            console.log(error);\n        }\n    }\n\n    componentDidMount(){\n        this.getData();\n        // let houses = this.formatData(items);\n        // //console.log(houses);\n        // let featuredHouses = houses.filter(house => house.featured === true);\n        // let maxPrice = Math.max(...houses.map(item => item.price));\n        // let maxSize = Math.max(...houses.map(item => item.size));\n        // this.setState({\n        //     houses, \n        //     featuredHouses, \n        //     sortedRooms: houses, \n        //     loading: false,\n        //     price: maxPrice,\n        //     maxPrice: maxPrice,\n        //     maxSize: maxSize\n        // });\n    }\n\n    formatData(items){\n        let tempItems = items.map(item => {\n            let id = item.sys.id;\n            let images = item.fields.images.map(image => image.fields.file.url);\n            let house = {...item.fields, images, id}; //images : images overwrite\n            return house;\n        });\n        return tempItems;\n    }\n\n    getHouse = (slug) => {\n        let tempHouses = [...this.state.houses];\n        const house = tempHouses.find(house => house.slug === slug);\n        return house;\n    }\n\n    handleChange = event => {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = event.target.name;\n        this.setState({\n            [name]: value\n        }, this.filterHouses)\n        // const type = event.target.type;\n        // const name = event.target.name;\n        // const value = event.target.value;\n        //console.log(`this is type: ${type}, this is name: ${name}, this is value: ${value}`);\n    }\n\n    filterHouses = () => {\n        let {\n            houses, type, capacity, price, minSize, maxSize, breakfast, pets\n        } = this.state;\n        // all the houses\n        let tempHouses = [...houses];\n\n        // transform value\n        capacity = parseInt(capacity);\n        price = parseInt(price);\n\n        // filter by type\n        if (type !== 'all') {\n            tempHouses = tempHouses.filter(house => house.type === type);\n        }\n\n        // filter by capacity\n        if(capacity !== 1){\n            tempHouses = tempHouses.filter(house => house.capacity >= capacity);\n        }\n\n        // filter by price\n        tempHouses = tempHouses.filter(house => house.price <= price);\n        // filter by size\n        tempHouses = tempHouses.filter(house => house.size >= minSize && house.size <= maxSize);\n        // filter by breakfast\n        if(breakfast){\n            tempHouses = tempHouses.filter(house => house.breakfast === true);\n        }\n        // filter by pets\n        if(pets){\n            tempHouses = tempHouses.filter(house => house.pets === true);\n        }\n\n        // change state\n        this.setState({\n            sortedRooms: tempHouses\n        })\n        // console.log(\"hello\");\n    }\n\n    render() {\n        return (\n            <RoomContext.Provider value={{\n                ...this.state, \n                getHouse: this.getHouse, \n                handleChange: this.handleChange\n                }}>\n                {this.props.children}\n            </RoomContext.Provider>\n        )\n    }\n}\n\nconst RoomConsumer = RoomContext.Consumer;\n\nexport function withRoomConsumer(Component){\n    return function ConsumerWrapper(props){\n        return (\n        <RoomConsumer>\n            {value => <Component {...props} context={value}/> }\n        </RoomConsumer>\n        );\n    };\n}\n\nexport{RoomProvider, RoomConsumer, RoomContext}"]},"metadata":{},"sourceType":"module"}
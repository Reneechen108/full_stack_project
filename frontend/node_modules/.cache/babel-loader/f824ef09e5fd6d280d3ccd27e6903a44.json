{"ast":null,"code":"var _jsxFileName = \"/Users/ruichunchen/my-react/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Home from './pages/Home';\nimport Houses from './pages/Houses';\nimport SingleHouse from './pages/SingleHouse';\nimport Error from './pages/Error';\nimport Other from './pages/Other';\nimport Login from './pages/Login';\nimport UserStore from './stores/UserStore';\nimport InputField from './components/InputField';\nimport SubmitButton from './components/SubmitButton';\nimport { Route, Switch } from 'react-router-dom';\nimport Navbar from \"./components/Navbar\";\nimport { render } from '@testing-library/react';\n\nclass App extends Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    } catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.username = '';\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    if (UserStore.loading) {\n      /*#__PURE__*/\n      React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: Home,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/houses/\",\n      component: Houses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/houses/:id\",\n      component: SingleHouse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login/\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/other/\",\n      component: Other,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/ruichunchen/my-react/src/App.js"],"names":["React","Component","Home","Houses","SingleHouse","Error","Other","Login","UserStore","InputField","SubmitButton","Route","Switch","Navbar","render","App","componentDidMount","res","fetch","method","header","result","json","success","loading","isLoggedIn","username","e","doLogout","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport Home from './pages/Home';\nimport Houses from './pages/Houses';\nimport SingleHouse from './pages/SingleHouse';\nimport Error from './pages/Error';\nimport Other from './pages/Other';\nimport Login from './pages/Login'\nimport UserStore from './stores/UserStore';\nimport InputField from './components/InputField';\nimport SubmitButton from './components/SubmitButton';\n\nimport {Route, Switch} from 'react-router-dom';\nimport Navbar from \"./components/Navbar\";\nimport { render } from '@testing-library/react';\n\n\nclass App extends Component{\n  async componentDidMount() {\n    try{\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n      }else{\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    }catch(e){\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try{\n      let res = await fetch('/logout', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-type': 'application/json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n        UserStore.isLoggedIn = false;\n        UserStore.username = '';\n      }\n    }catch(e){\n      console.log(e);\n    }\n  }\n\n  render(){\n    if(UserStore.loading){\n      <Loading />\n    }\n    return (\n      <>\n      <Navbar />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/houses/\" component={Houses} />\n        <Route exact path=\"/houses/:id\" component={SingleHouse} />\n        <Route exact path=\"/login/\" component={Login} />\n        <Route exact path=\"/other/\" component={Other} />\n        <Route component={Error} />\n      </Switch>\n      </>\n      );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
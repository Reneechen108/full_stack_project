{"ast":null,"code":"var _jsxFileName = \"/Users/ruichunchen/my-react/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport UserStore from '../stores/UserStore';\nimport LoginForm from '../components/LoginForm';\nimport SubmitButton from '../components/SubmitButton';\nimport Loading from '../components/loading';\nimport { NavBar, Nav, NavItem, Button } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass Login extends Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    } catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        header: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.username = '';\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    if (UserStore.loading) {\n      return /*#__PURE__*/React.createElement(Loading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 20\n        }\n      });\n    } else {\n      if (UserStore.isLoggedIn) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"app\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }\n        }, \"Welcome \", UserStore.username, /*#__PURE__*/React.createElement(SubmitButton, {\n          text: 'Log Out',\n          disabled: false,\n          onClick: () => this.doLogout(),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }\n        })));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Primary\"), ' ', /*#__PURE__*/React.createElement(Nav, {\n      activeKey: \"/home\",\n      onSelect: selectedKey => alert(`selected ${selectedKey}`),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      href: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }\n    }, \"Active\")), /*#__PURE__*/React.createElement(Nav.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      eventKey: \"link-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }\n    }, \"Link\")), /*#__PURE__*/React.createElement(Nav.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      eventKey: \"link-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }\n    }, \"Link\")), /*#__PURE__*/React.createElement(Nav.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(Nav.Link, {\n      eventKey: \"disabled\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }\n    }, \"Disabled\"))));\n  }\n\n}\n\nexport default observer(Login);","map":{"version":3,"sources":["/Users/ruichunchen/my-react/src/pages/Login.js"],"names":["React","Component","observer","UserStore","LoginForm","SubmitButton","Loading","NavBar","Nav","NavItem","Button","Login","componentDidMount","res","fetch","method","header","result","json","success","loading","isLoggedIn","username","e","doLogout","console","log","render","selectedKey","alert"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport UserStore from '../stores/UserStore';\nimport LoginForm from '../components/LoginForm'\nimport SubmitButton from '../components/SubmitButton';\nimport Loading from '../components/loading';\nimport { NavBar, Nav, NavItem, Button } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass Login extends Component {\n    async componentDidMount() {\n        try{\n            let res = await fetch('/isLoggedIn', {\n                method: 'post',\n                header: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n                }\n            });\n            let result = await res.json();\n            if(result && result.success){\n                UserStore.loading = false;\n                UserStore.isLoggedIn = true;\n                UserStore.username = result.username;\n            }else{\n                UserStore.loading = false;\n                UserStore.isLoggedIn = false;\n            }\n        }catch(e){\n            UserStore.loading = false;\n            UserStore.isLoggedIn = false;\n        }\n    }\n    \n    async doLogout() {\n        try{\n          let res = await fetch('/logout', {\n            method: 'post',\n            header: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            }\n          });\n          let result = await res.json();\n          if(result && result.success){\n            UserStore.isLoggedIn = false;\n            UserStore.username = '';\n          }\n        }catch(e){\n          console.log(e);\n        }\n    }\n\n    render() {\n        if(UserStore.loading){\n            return <Loading />\n        }else{\n            if(UserStore.isLoggedIn){\n                return (\n                    <div className=\"app\">\n                        <div className=\"container\"> \n                            Welcome {UserStore.username}\n                            <SubmitButton \n                            text = {'Log Out'}\n                            disabled={false}\n                            onClick={ () => this.doLogout()}\n                            />\n                        </div>\n                    </div>\n                )\n            }\n        }\n        return (\n            \n            <div className=\"login\">\n                <Button variant=\"primary\">Primary</Button>{' '}\n                <Nav\n  activeKey=\"/home\"\n  onSelect={(selectedKey) => alert(`selected ${selectedKey}`)}\n>\n  <Nav.Item>\n    <Nav.Link href=\"/home\">Active</Nav.Link>\n  </Nav.Item>\n  <Nav.Item>\n    <Nav.Link eventKey=\"link-1\">Link</Nav.Link>\n  </Nav.Item>\n  <Nav.Item>\n    <Nav.Link eventKey=\"link-2\">Link</Nav.Link>\n  </Nav.Item>\n  <Nav.Item>\n    <Nav.Link eventKey=\"disabled\" disabled>\n      Disabled\n    </Nav.Link>\n  </Nav.Item>\n</Nav>\n            </div>\n        )\n    }\n}\nexport default observer(Login);"]},"metadata":{},"sourceType":"module"}